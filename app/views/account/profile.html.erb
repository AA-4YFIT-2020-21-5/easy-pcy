<h1 class="display-3 margin-left-10">Profil</h1>

<!-- Card -->
<form action="/profile/edit" method="post" id="settings" class="margin-left-10 card float-left">

  <!-- Card content -->
  <div class="card-body">
    <div class="d-flex">
      <i class="fas fa-user-circle fa-4x"></i>
      <p id="username" class="margin-left-10 h4" style="margin-top: 21px; display: initial"><%= @user_profile.display_name %></p>
      <!-- Material background input -->
      <div id="change-username" class="margin-left-10 md-form md-bg" style="margin-top: 10px; display: none">
        <input type="text" name="new_name" id="text-user" class="form-control bottom-border-purple" required>
        <label for="text-user" class="purple-text">Benutzername</label>
      </div>
    </div>

    <div class="mt-3">
      <h1 class="h1">Beschreibung</h1>
      <p id="desc"><%= @user_profile.description %></p>

      <div id="change-desc" class="md-form md-bg w-100 h-25" style="display: none">
        <textarea name="new_description" id="entry-content" style="overflow-y: auto" class="h-100 md-textarea form-control bottom-border-purple" rows="3" required></textarea>
        <label for="entry-content"></label>
      </div>
    </div>

    <div class="mt-5">
      <h1 class="h1">Kursfortschritt</h1>
      <p class="h1 amber-text"><%= (@user.progress.completed_courses_percent*100.0).floor %>%</p>
    </div>

    <div class="margin-bottom-10 margin-right-10 align-bottom-right">
      <button type="button" id="change-btn" class="btn btn-purple" style="display: initial">
        <i class="fas fa-edit pl-1" style="margin-right: 5px"></i>Ändern
      </button>

      <button id="cancel-btn" class="btn btn-outline-purple" style="display: none">
        <i class="fas fa-times-circle pl-1" style="margin-right: 5px"></i>Abbrechen
      </button>
      <button type="submit" id="save-btn" class="btn btn-purple" style="display: none">
        <i class="fas fa-save pl-1" style="margin-right: 5px"></i>Speichern
      </button>
    </div>

  </div>
  <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
</form>

<!-- Card -->
<div id="activity" class="margin-right-rem card float-right">

  <!-- Card content -->
  <div class="card-body p-0">
    <h1 class="margin-left-10 margin-top-10">Aktivität</h1>
    <div class="list-group" id="posts">
      <% @activities.reverse.each do |(text, url, timestamp)| %>
        <a href="<%= url %>" class="list-group-item list-group-item-action flex-column align-items-start">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="h5 mb-0"><%= text %></h5>
            <p class="my-auto align-bottom-right margin-right-10"><%= time_ago_in_words(timestamp) %> ago</p>
          </div>
        </a>
      <% end %>
    </div>
  </div>
</div>

<script defer src="js/change-acc.js"></script>

